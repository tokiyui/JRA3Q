<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Image Viewer</title>
<script>
window.onload = function() {
    // ディレクトリ内のファイルを取得してプルダウンメニューを作成する関数
    function populateDropdown() {
        const directoryPath = './'; // カレントディレクトリ
        const dropdown = document.getElementById('imageSelect');

        fetch(directoryPath)
            .then(response => response.text())
            .then(text => {
                const parser = new DOMParser();
                const htmlDocument = parser.parseFromString(text, 'text/html');
                const files = Array.from(htmlDocument.querySelectorAll('a')).map(a => a.getAttribute('href'));

                // 10桁の数字にマッチするファイル名をフィルタリング
                const imageFiles = files.filter(file => /^[0-9]{10}Z_(500hPa|surf)\.jpg$/.test(file));

                // プルダウンメニューを作成
                imageFiles.forEach(file => {
                    const option = document.createElement('option');
                    option.text = file.substring(0, 10); // ファイル名から10桁の数字を取得
                    dropdown.add(option);
                });
            })
            .catch(error => console.error('Error fetching directory:', error));
    }

    // プルダウンが選択されたときに画像を表示する関数
    function showImages() {
        const selectedValue = document.getElementById('imageSelect').value;
        const image500hPa = selectedValue + 'Z_500hPa.jpg';
        const imageSurf = selectedValue + 'Z_surf.jpg';
        document.getElementById('image500hPa').src = image500hPa;
        document.getElementById('imageSurf').src = imageSurf;
    }

    populateDropdown(); // ページロード時にプルダウンメニューを作成
};
</script>
</head>
<body>
<h2>画像を選択してください：</h2>
<select id="imageSelect" onchange="showImages()">
    <!-- プルダウンメニューはfetchによって動的に生成されます -->
</select>
<br><br>
<div>
    <h3>500hPaの画像：</h3>
    <img id="image500hPa" src="" alt="500hPaの画像">
</div>
<div>
    <h3>地上の画像：</h3>
    <img id="imageSurf" src="" alt="地上の画像">
</div>
</body>
</html>
